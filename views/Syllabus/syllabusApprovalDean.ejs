<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Approve Syllabus â€” Dean</title>
    <link rel="stylesheet" href="/common/css/variables.css">
    <link rel="stylesheet" href="/Syllabus/css/syllabus.css">
    <link rel="stylesheet" href="/Syllabus/css/reviewSyllabus.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <div class="dashboard">
        <%- include('../partials/sideMenuBar') %>

            <main class="main-content" style="background:#f7f8fa !important;">

                <!-- Top Banner -->
                <div class="review-top-banner">
                    <div class="banner-content">
                        <div class="banner-logo">
                            <img src="/common/logo/MAPUA_LOGO.png" alt="Logo"
                                onerror="this.src='https://upload.wikimedia.org/wikipedia/en/thumb/3/36/Map%C3%BAa_University_logo.svg/1200px-Map%C3%BAa_University_logo.svg.png'">
                        </div>
                        <div class="banner-text">
                            <h1>
                                <%= courseName %>
                            </h1>
                            <p>
                                <%= courseCode %>
                            </p>
                            <p>
                                <%= courseSection %>
                            </p>
                            <p>
                                <%= academicYear %>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Page Content Card -->
                <div class="review-card-container">
                    <div class="review-page-header">
                        <button class="review-back-btn" onclick="window.history.back()">
                            <i class="fas fa-chevron-left"></i> BACK
                        </button>
                        <div class="file-type-title">
                            <h2>
                                <%= fileType %>
                            </h2>
                        </div>
                    </div>
                    <hr class="review-page-divider">

                    <div class="review-content-layout">

                        <!-- Left Panel -->
                        <div class="review-left-panel">
                            <h3>Basic Information</h3>
                            <div class="document-placeholder">
                                <p>[FORMS FROM THE RESPECTIVE<br>GROUPS (EX. TLA FORMS,<br>SYLLABUS FORMS)]</p>
                            </div>
                        </div>

                        <!-- Right Panel -->
                        <div class="review-right-panel">
                            <div class="permission-card">
                                <h3>Dean Approval</h3>

                                <!-- Progress Tracker: Dean is On-Going -->
                                <div class="progress-tracker">
                                    <div class="step completed">
                                        <div class="step-circle"></div>
                                        <span>Faculty<br>Submitted</span>
                                    </div>
                                    <div class="step-line completed"></div>

                                    <div class="step completed">
                                        <div class="step-circle"></div>
                                        <span>Technical<br>Assistant<br>Reviewed</span>
                                    </div>
                                    <div class="step-line completed"></div>

                                    <div class="step completed">
                                        <div class="step-circle"></div>
                                        <span>Program<br>Chair<br>Endorsed</span>
                                    </div>
                                    <div class="step-line ongoing"></div>

                                    <div class="step ongoing">
                                        <div class="step-circle"></div>
                                        <span>Dean<br>On-Going</span>
                                    </div>
                                    <div class="step-line"></div>

                                    <div class="step">
                                        <div class="step-circle"></div>
                                        <span>HR<br>Pending</span>
                                    </div>
                                </div>

                                <!-- Comments -->
                                <div class="comments-section">
                                    <label>Comments</label>
                                    <textarea id="deanComments" placeholder="Add approval remarks..."></textarea>
                                </div>

                                <!-- Status -->
                                <div class="status-section">
                                    <label>Status</label>
                                    <div class="styled-select-container">
                                        <span class="status-dot"></span>
                                        <select id="statusSelect" onchange="updateStatusDot()">
                                            <option value="approved">Approved</option>
                                            <option value="revision">For Revision</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="action-buttons">
                                    <button class="btn-red"><i class="fas fa-file-pdf"></i> Save as PDF</button>
                                    <button class="btn-dark"><i class="fas fa-folder"></i> Save as Draft</button>
                                    <button class="btn-purple" onclick="submitApproval()">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
    </div>

    <script>
        function updateStatusDot() {
            const select = document.getElementById('statusSelect');
            const dot = document.querySelector('.status-dot');
            dot.style.backgroundColor = select.value === 'approved' ? '#16a34a' : '#ea580c';
        }
        updateStatusDot();

        function submitApproval() {
            const status = document.getElementById('statusSelect').value;
            const comments = document.getElementById('deanComments').value;
            // TODO: POST to /syllabus/dean/approve/:syllabusId/submit
            alert('Approval submitted!\nStatus: ' + status + '\nComments: ' + (comments || '(none)'));
        }
    </script>
</body>

</html>