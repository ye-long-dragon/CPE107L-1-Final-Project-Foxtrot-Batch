<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<style>
    .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        width: 260px;
        height: 100vh;
        background-color: var(--sidebar-bg);
        color: var(--text-on-dark);
        display: flex;
        flex-direction: column;
        z-index: 1000;
    }

    .sidebar-logo {
        padding: 20px;
        text-align: center;
    }
    .sidebar-logo img {
        max-width: 140px;
        height: auto;
    }

    .user-profile {
        padding: 15px 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        border-bottom: 1px solid var(--sidebar-line);
        margin-bottom: 10px;
    }

    .avatar {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        object-fit: cover;
    }

    .username {
        font-size: 0.9rem;
        color: var(--text-on-dark);
    }

    .sidebar-menu {
        list-style: none;
        padding: 0;
        margin: 0;
        flex-grow: 1;
    }

    .sidebar-menu li a {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        color: var(--text-muted); 
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .sidebar-menu li a.active {
        background-color: var(--accent-primary); 
        color: var(--text-on-dark);
        border-left: 4px solid var(--text-on-dark);
        font-weight: 600;

        /* disable button when it is already selected*/
        pointer-events: none; 
        cursor: default;
    }

    .sidebar-menu li a:hover:not(.active) {
        background-color: var(--sidebar-hover);
        color: var(--text-on-dark);
    }

    .sidebar-footer {
        padding: 20px;
        border-top: 1px solid var(--sidebar-line);
    }

    .sign-out-btn {
        background: none;
        border: none;
        color: var(--text-muted);
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
        width: 100%;
        text-align: left;
        
        padding: 12px 20px;
        transition: all 0.3s ease;
    }

    .sign-out-btn:hover {
        background-color: var(--sidebar-hover);
        color: var(--text-on-dark);
    }

    .material-symbols-outlined {
        margin-right: 15px;
        font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24
    }
</style>

<nav class="sidebar">
    <div class="sidebar-logo">
        <img src="/common/img/schoolLogo.png" alt="Logo">
    </div>

    <div class="user-profile">
        <img src="<%= (typeof user !== 'undefined' && user.avatar) ? user.avatar : '/common/img/default-avatar.jpg' %>" 
            alt="User Profile Picture" 
            class="avatar">
        <%= (typeof user !== 'undefined' && user.fullName) ? user.fullName : 'Guest User' %>
    </div>

    <ul class="sidebar-menu">
        <li><a href="/institution" class="<%= currentPageCategory === 'institution' ? 'active' : '' %>">
            <span class="material-symbols-outlined">home</span>
            <span class="menu-text">Institution</span></a></li>
        <li><a href="/tws" class="<%= currentPageCategory === 'tws' ? 'active' : '' %>">
            <span class="material-symbols-outlined">event_note</span>
            <span class="menu-text">TWS</span></a></li>
        <li><a href="/ata" class="<%= currentPageCategory === 'ata' ? 'active' : '' %>">
            <span class="material-symbols-outlined">fact_check</span>
            <span class="menu-text">ATA</span></a></li>
        <li><a href="/syllabus" class="<%= currentPageCategory === 'syllabus' ? 'active' : '' %>">
            <span class="material-symbols-outlined">book_4</span>
            <span class="menu-text">Syllabus</span></a></li>
        <li><a href="/tla" class="<%= currentPageCategory === 'tla' ? 'active' : '' %>">
            <span class="material-symbols-outlined">assignment</span>
            <span class="menu-text">TLA</span></a></li>
        
    </ul>

    <div class="sidebar-footer">
        <button class="sign-out-btn">
            <span class="material-symbols-outlined">exit_to_app</span>
            <span class="sign-out-text">Sign out</span>
        </button>
    </div>
</nav>