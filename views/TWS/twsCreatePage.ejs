<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>TWS - Teaching Workload Sheet</title>
  <link rel="stylesheet" href="/TWS/css/twsStyle.css" />
</head>
<body class="bg">
  <%- include('../partials/sideMenuBar') %>

  <div class="main">
    <div class="shell">
      <div class="page-title">TWS: Teaching Workload Sheet</div>

      <div class="panel">
        <div class="panel-header">
          <div class="panel-title">My Teaching Workload Sheets</div>

          <a class="btn btn-green" href="/twa/create">+ Create New TWS</a>
        </div>

        <div class="table">
          <div class="row head">
            <div>Academic Year</div>
            <div>Term</div>
            <div>Date Created</div>
            <div>Status</div>
            <div class="right">Action</div>
          </div>

          <% if (!list.length) { %>
            <div class="row">
              <div style="grid-column: 1 / -1; opacity:.8;">No TWS yet. Click “Create New TWS”.</div>
            </div>
          <% } %>

          <% list.slice(0,3).forEach((tws) => { %>
            <div class="row">
              <div><%= tws.faculty.acadYear || "2025 - 2026" %></div>
              <div><%= tws.faculty.term || "1st" %></div>
              <div><%= new Date(tws.createdAt).toLocaleDateString() %></div>
              <div><%= tws.status %></div>
              <div class="right">
                <a class="pill" href="/twa/summary/<%= tws.id %>">View</a>
                <a class="pill" href="/twa/faculty/<%= tws.id %>">Edit</a>
              </div>
            </div>
          <% }) %>
        </div>
      </div>

      <div class="panel panel-guidelines">
        <div class="panel-title">TWS Guidelines</div>
        <ul class="bullets">
          <li>Submit one Teaching Workload Sheet per semester.</li>
          <li>Approved TWS documents are automatically archived.</li>
        </ul>

        <div class="next-wrapper">
          <% if (list.length) { %>
            <a class="btn btn-big" href="/twa/faculty/<%= list[0].id %>">Next</a>
          <% } else { %>
            <a class="btn btn-big" href="/twa/create">Next</a>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</body>
</html>